<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
  <title>文字数チェッカー (jQuery)</title>
  <style type="text/css">
<!--

#memo {
  width: 500px;
  height:150px;
}

.warning {
  color: red;
  font-weight: bold;
}

--></style>
  <script type="text/javascript" src="js/jquery-1.10.2.min.js"></script>
</head>

<body>

  <h1>のこりもじすうはどうなってんの？</h1>
  <textarea id="memo"></textarea>

  <div id="count"></div>
  
  <script type="text/javascript">
<!--

$(function(){

  var LIMIT = 40;
  var WARNING = 12;
  
  var count = $('#count');
  
  count.text(LIMIT);
  
  function countChars(textarea) {
    
    // 残り許容数を取得
    var remaining = LIMIT - textarea.val().length;
    count.text(remaining);
    
    // 警告のしきい値以下になったら強調（クラス変更）
    if( remaining <= WARNING ) {
      count.addClass('warning');
    }
    else {
      count.removeClass('warning');
    }
  }
  
  // イベントの追加
  $('#memo').keyup(function(){
    countChars($(this));
  });

});

//--></script>

</body>

</html>
